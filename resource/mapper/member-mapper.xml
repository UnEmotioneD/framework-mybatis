<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 현재 mapper 파일을 식별할 수 있는 이름을 지정해준다 -->
<mapper namespace="member">
	<!-- html == 사용자가 볼수 있게 해줌 -->
	<!-- xml == 데이터를 저장하는 목적으로 사용 -->

	<!-- 
		[표현식]
		
		<SQL 종류
		id = "현제 mapper.xml 에서 각 SQL 을 식별할 수 있는 값"
		parameterType="DAO 에서 SQL 호출하여 전달한 파라미터의 자료형"
		resultType="SQL 수행결과를 저장할 JAVA 자료형">
		
		실제 수행할 SQL
		</SQL 종류>
		
		[특징]
		1) SELECT 결과의 각 컬럼 값을, JAVA 객체 변수병과 일치 시키면 자동으로 값이 지정된다
		2) 전달된 파라미터(Mapper 객체)를 SQL에 바이딩 하기위해 #{필드명} 를 사용한다
			-> #{memberId} -> 'user01'
			-> #{memberPw} -> '1234'

			차이점 : 문자열로 치환할지 값 자체로 바꿀지
			-> ${memberId} -> user01 (작은 따옴표가 붙지 않음, SQL injection 보안상 권장되지 않음)

			!!! "$" 를 이용해서 테이블명, 컬럼명을 동적으로 바꿀 수 있다 !!!
			
		3) SQL 문 마지막에 semi-colon(;) 은 작성 하지 않는다
	-->

	<!-- src/main/java 까지는 기본으로 잡힘 -->
	<!-- resultType == 실행 결과를 Member 객체로 묶어서 보낸다 -->
	
	<select id="selectOneMember"
		parameterType="kr.or.iei.member.model.vo.Member"
		resultType="kr.or.iei.member.model.vo.Member">
		select
			member_no    as "memberNo",
			member_id    as "memberId",
			member_pw    as "memberPW",
			member_name  as "memberName",
			member_email as "memberEmail",
			member_phone as "memberPhone",
			member_addr  as "memberAddr",
			member_level as "memberLevel",
			enroll_date  as "enrollDate"
		from tbl_member
		where member_id = #{memberId}
		and member_pw = #{memberPw}
	</select>
	
	<!-- 회원 정보 등록
		INSERT 의 결과는 항상 정수값이므로 resultType 생략
	-->
	<insert id="insertMember"
		parameterType="kr.or.iei.member.model.vo.Member">
		insert into tbl_member 
		(
			member_no, 
			member_id, 
			member_pw, 
			member_name, 
			member_email, 
			member_phone, 
			member_addr,
			member_level, 
			enroll_date
		) 
		values 
		(
			seq_member.nextval,
			#{memberId},
			#{memberPw},
			#{memberName},
			#{memberEmail},
			#{memberPhone},
			#{memberAddr},
			default,
			sysdate
		)
	</insert>
	
	<!-- 저달 받는 파라미터가 없음 -->
	<!-- resultType : 리스트로 반환되는 객체 자료형 -->
	<select id="selectAllMember"
	resultType="kr.or.iei.member.model.vo.Member">
	select 
		member_no    as "memberNo",
		member_id    as "memberId",
		member_pw    as "memberPW",
		member_name  as "memberName",
		member_email as "memberEmail",
		member_phone as "memberPhone",
		member_addr  as "memberAddr",
		member_level as "memberLevel",
		enroll_date  as "enrollDate"
	from tbl_member
	order by 1
	</select>

</mapper>
